<h1>Welcome <%= current_user.email %> </h1>

<%= render "new" %>

<% @posts.each do |post| %>
  <div class="post-<%= post.id %> mb-2">
    <span class="author">
      <%# place user profile image  %>
      <%= image_tag(post.author.avatar.variant(resize_to_fill: [50, 50]), class: "rounded-circle") if post.author.avatar.attached? %>
      <%= post.author.email %>
      <%# place when posted ... maybe post options such as public, friends, etc... %>
    </span>
    <p class="body">
      <% if char_count_high_for(post.body) %>
        <%= post.body.truncate(400) %> <%= link_to "See More", user_post_path(post.author_id, post), class: "see-more" %>
      <% else %>
        <%= post.body %>
      <% end %>
    </p>
    <%# Post stats %>
    <span class="stats d-flex justify-content-between">
      <span class="likes">
        <% if post.likes.count > 0 %>
          <%= render "users/shared/likes", likes: post.likes %>
        <% end %>
      </span>
      <span class="comment-count"><%= render "shared/comment_count", post: post %></span>
    </span>
    <hr>
    <%# Section where user can like, comment, maybe share %>
    <div class="actions mb-2">
      <div class="d-flex justify-content-around" role="group" aria-label="like and comment">
        <div class="like">
          <% if post.likes.pluck(:user_id).include?(current_user.id) %>
            <%= render "shared/unlike_button", post: post %>
          <% else %>
            <%= render "shared/like_button", post: post %>
          <% end %>
        </div>
        <%= button_to new_user_post_comment_path(post.author_id, post), method: :get, remote: true, class: "btn btn-outline-secondary border-0" do %>
          <strong>
            <svg class="bi bi-chat" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path stroke="currentColor" stroke-width=".5" fill-rule="evenodd" d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
            </svg>
            <span class="align-middle">Comment</span>
          </strong>
        <% end %>
      </div>
    </div>
    <div class="comments"></div>
    <div class="new-comment"></div>
  </div>
<% end %>